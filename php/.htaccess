RewriteEngine On
RewriteBase /

# ------------------------------------
# 1️⃣ Force HTTPS (SEO + Security)
# ------------------------------------
RewriteCond %{HTTPS} off
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# ------------------------------------
# 2️⃣ Allow static files directly
# (sitemap.xml, robots.txt, images, JS, CSS)
# ------------------------------------
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# ------------------------------------
# 3️⃣ API routing
# ------------------------------------
RewriteRule ^api(/.*)?$ api/index.php [QSA,L]

# ------------------------------------
# 4️⃣ PHP Pages (folder-based structure)
# ------------------------------------
RewriteRule ^about/?$ about/index.php [L,NC]
RewriteRule ^contact/?$ contact/index.php [L,NC]
RewriteRule ^privacy/?$ privacy/index.php [L,NC]
RewriteRule ^terms/?$ terms/index.php [L,NC]
RewriteRule ^regulatory/?$ regulatory/index.php [L,NC]
RewriteRule ^login/?$ login/index.php [L,NC]

# ------------------------------------
# 5️⃣ Dashboard SPA (React app)
# ------------------------------------
RewriteRule ^dashboard/?$ dashboard/index.html [L,NC]
RewriteRule ^dashboard/(.*)$ dashboard/index.html [L,NC]

# ------------------------------------
# 6️⃣ Homepage fallback
# ------------------------------------
RewriteRule ^$ index.php [L]
